<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CodeYourFuture Syllabus Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CodeYourFuture Syllabus Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159979458-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="CodeYourFuture Syllabus" href="/opensearch.xml">
<script src="/js/fix-location.js"></script><title data-react-helmet="true">Database 2-  More SQL and integration with NodeJS | CodeYourFuture Syllabus</title><meta data-react-helmet="true" property="og:url" content="https://syllabus.codeyourfuture.io//db/week-2/lesson"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Database 2-  More SQL and integration with NodeJS | CodeYourFuture Syllabus"><meta data-react-helmet="true" name="description" content="What will we learn today?"><meta data-react-helmet="true" property="og:description" content="What will we learn today?"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://syllabus.codeyourfuture.io//db/week-2/lesson"><link data-react-helmet="true" rel="alternate" href="https://syllabus.codeyourfuture.io//db/week-2/lesson" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://syllabus.codeyourfuture.io//db/week-2/lesson" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.8f72b28b.css">
<link rel="preload" href="/assets/js/runtime~main.5d552f86.js" as="script">
<link rel="preload" href="/assets/js/main.7ad0a69c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/Overview">Overview</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Modules</a><ul class="dropdown__menu"><li><a href="https://introtocoding.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link outside-link" position="left">Intro To Coding</a></li><li><a href="https://fundamentals.codeyourfuture.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link outside-link" position="left">Fundamentals</a></li><li><a href="https://personaldevelopment.codeyourfuture.io/em-modules/induction-week" target="_blank" rel="noopener noreferrer" class="dropdown__link outside-link" position="left">Induction</a></li><li><a class="dropdown__link" position="left" href="/git/overview">Git and Github</a></li><li><a class="dropdown__link" position="left" href="/html-css/index">HTML-CSS</a></li><li><a class="dropdown__link" position="left" href="/js-core-1/index">JavaScript Core 1</a></li><li><a class="dropdown__link" position="left" href="/js-core-2/index">JavaScript Core 2</a></li><li><a class="dropdown__link" position="left" href="/js-core-3/index">JavaScript Core 3</a></li><li><a class="dropdown__link" position="left" href="/react/index">React</a></li><li><a class="dropdown__link" position="left" href="/node/index">Node</a></li><li><a class="dropdown__link" position="left" href="/db/index">SQL</a></li><li><a class="dropdown__link" position="left" href="/mongodb/index">MongoDB</a></li><li><a class="dropdown__link" position="left" href="/finalproject/intro">Final Projects</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Workshops</a><ul class="dropdown__menu"><li><a class="dropdown__link" position="left" href="/workshops/accessibility/index">Accessibility Workshops</a></li><li><a class="dropdown__link" position="left" href="/workshops/aws-dynamodb">AWS &amp; DynamoDB Workshop</a></li><li><a class="dropdown__link" position="left" href="/workshops/processing-js-workshop">Processing.js Workshop</a></li><li><a class="dropdown__link" position="left" href="/workshops/js-testing-workshop">JavaScript Testing Workshop</a></li><li><a class="dropdown__link" position="left" href="/workshops/deployment/index">Deploying Your Code Workshop</a></li><li><a class="dropdown__link" position="left" href="/workshops/interviews/index">Interviews</a></li><li><a class="dropdown__link" position="left">-----------</a></li><li><a href="https://github.com/CodeYourFuture/syllabus/issues/new?assignees=&amp;labels=Workshop&amp;template=workshop-request.md&amp;title=%5BWorkshop%5D" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">Want to request a workshop?</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Guides</a><ul class="dropdown__menu"><li><a class="dropdown__link" position="left" href="/guides/paradigm">Our Approach</a></li><li><a class="dropdown__link" position="left" href="/guides/marking-guide">Marking Guide</a></li><li><a class="dropdown__link" position="left" href="/guides/code-style-guide">Code Style Guide</a></li><li><a class="dropdown__link" position="left" href="/guides/coding-101">Coding 101</a></li><li><a class="dropdown__link" position="left" href="/guides/escalation-policy">Escalation Policy</a></li><li><a class="dropdown__link" position="left" href="/guides/react-cheatsheet">React Cheatsheet</a></li><li><a class="dropdown__link" position="left" href="/guides/useful-links">Useful Links</a></li><li><a class="dropdown__link" position="left" href="/guides/creating-a-react-app">Creating a React App</a></li><li><a class="dropdown__link" position="left" href="/guides/intro-to-tests">Introduction to tests</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Other</a><ul class="dropdown__menu"><li><a href="https://teachertraining.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link outside-link" position="left">Teacher Training</a></li><li><a href="https://docs.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link outside-link" position="left">Organisation Documentation</a></li><li><a href="https://personaldevelopment.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link outside-link" position="left">Personal Development</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/contributing/overview">Want to contribute?</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Modules</a><ul class="menu__list"><li class="menu__list-item"><a href="https://introtocoding.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="menu__link outside-link" position="left">Intro To Coding</a></li><li class="menu__list-item"><a href="https://fundamentals.codeyourfuture.io/" target="_blank" rel="noopener noreferrer" class="menu__link outside-link" position="left">Fundamentals</a></li><li class="menu__list-item"><a href="https://personaldevelopment.codeyourfuture.io/em-modules/induction-week" target="_blank" rel="noopener noreferrer" class="menu__link outside-link" position="left">Induction</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/git/overview">Git and Github</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/html-css/index">HTML-CSS</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/js-core-1/index">JavaScript Core 1</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/js-core-2/index">JavaScript Core 2</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/js-core-3/index">JavaScript Core 3</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/react/index">React</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/node/index">Node</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/db/index">SQL</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/mongodb/index">MongoDB</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/finalproject/intro">Final Projects</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Workshops</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/workshops/accessibility/index">Accessibility Workshops</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/workshops/aws-dynamodb">AWS &amp; DynamoDB Workshop</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/workshops/processing-js-workshop">Processing.js Workshop</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/workshops/js-testing-workshop">JavaScript Testing Workshop</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/workshops/deployment/index">Deploying Your Code Workshop</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/workshops/interviews/index">Interviews</a></li><li class="menu__list-item"><a class="menu__link" position="left">-----------</a></li><li class="menu__list-item"><a href="https://github.com/CodeYourFuture/syllabus/issues/new?assignees=&amp;labels=Workshop&amp;template=workshop-request.md&amp;title=%5BWorkshop%5D" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">Want to request a workshop?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/paradigm">Our Approach</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/marking-guide">Marking Guide</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/code-style-guide">Code Style Guide</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/coding-101">Coding 101</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/escalation-policy">Escalation Policy</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/react-cheatsheet">React Cheatsheet</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/useful-links">Useful Links</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/creating-a-react-app">Creating a React App</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/guides/intro-to-tests">Introduction to tests</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Other</a><ul class="menu__list"><li class="menu__list-item"><a href="https://teachertraining.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="menu__link outside-link" position="left">Teacher Training</a></li><li class="menu__list-item"><a href="https://docs.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="menu__link outside-link" position="left">Organisation Documentation</a></li><li class="menu__list-item"><a href="https://personaldevelopment.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="menu__link outside-link" position="left">Personal Development</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/contributing/overview">Want to contribute?</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_1VuW themedImage--dark_hz6m"></a><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/db/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/db/prep">Preparation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Lesson 1</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/db/week-1/lesson">Lesson</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/db/week-1/instructors">Instructor Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/db/week-1/homework">Coursework</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Lesson 2</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/db/week-2/lesson">Lesson</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/db/week-2/instructors">Instructor Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/db/week-2/homework">Coursework</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Lesson 3</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/db/week-3/lesson">Lesson</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/db/week-3/instructors">Instructor Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/db/week-3/homework">Coursework</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Database 2-  More SQL and integration with NodeJS</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="what-will-we-learn-today"></a>What will we learn today?<a class="hash-link" href="#what-will-we-learn-today" title="Direct link to heading">#</a></h2><ul><li>Revision from last week</li><li><a href="#more-sql">More SQL</a><ul><li>Changing the definition of a table</li><li>Dropping a table</li><li>Updating a row</li><li>Deleting a row</li><li>Join tables</li><li>Other useful operations</li></ul></li><li><a href="#integration-with-nodejs">Integration with NodeJS</a><ul><li>Introduction to node-postgres</li><li>Loading data from a database with a GET endpoint</li></ul></li><li><a href="#coursework">Coursework</a></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="learning-objectives"></a>Learning Objectives<a class="hash-link" href="#learning-objectives" title="Direct link to heading">#</a></h2><ul><li>Add and remove columns in a pre-existing table using PostgreSQL using <code>ALTER</code></li><li>Rename tables and columns in a pre-existing table using PostgreSQL using <code>DELETE</code></li><li>Update rows in a pre-existing table using PostgreSQL using <code>UPDATE</code></li><li>Combine tables together using PostgreSQL using <code>INNER JOIN</code></li><li>Connect a PostgreSQL database to a NodeJS application</li><li>Retrieve data from a PostgreSQL database in a NodeJS application</li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="more-sql"></a>More SQL<a class="hash-link" href="#more-sql" title="Direct link to heading">#</a></h2><p>For the following, use the file <a target="_blank" href="/assets/files/cyf_hotels_exercise5-88cc17362572ef85a70785dc2ceb21e9.sql"><code>cyf_hotels_exercise5.sql</code></a> from the previous class to reinitialise your database with <code>psql -d cyf_hotels -f cyf_hotels_exercise5.sql</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="changing-the-definition-of-a-table"></a>Changing the definition of a table<a class="hash-link" href="#changing-the-definition-of-a-table" title="Direct link to heading">#</a></h3><p>Sometimes, you may need to change the definition of a table you created before without deleting it. Such changes include renaming a table, adding/removing a column, changing the name of a column, changing the type of a column etc... The general syntax to perform these operations is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">ALTER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLE</span><span class="token plain"> table_name </span><span class="token keyword" style="font-style:italic">action</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>For example, to add a new column to the existing <code>customers</code> table:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">ALTER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLE</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">ADD</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">COLUMN</span><span class="token plain"> date_of_birth </span><span class="token keyword" style="font-style:italic">DATE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To delete an existing column from the <code>customers</code> table:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">ALTER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLE</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">DROP</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">COLUMN</span><span class="token plain"> date_of_birth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To rename the table <code>customers</code> into <code>clients</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">ALTER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLE</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">RENAME</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> clients</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>For more examples, you can consult the following tutorial: <a href="http://www.postgresqltutorial.com/postgresql-alter-table/" target="_blank" rel="noopener noreferrer">Postgres alter table</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="exercise-1"></a>Exercise 1<a class="hash-link" href="#exercise-1" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Exercise</h5></div><div class="admonition-content"><ol><li>Add a column <code>date_of_birth</code> of type <code>DATE</code> in the <code>customers</code> table.</li><li>Rename the column <code>date_of_birth</code> to <code>birthdate</code> in the <code>customers</code> table.</li><li>Delete the column <code>birthdate</code> from the <code>customers</code> table</li></ol></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="dropping-a-table"></a>Dropping a table<a class="hash-link" href="#dropping-a-table" title="Direct link to heading">#</a></h3><p>To delete the table <code>customers</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">DROP</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLE</span><span class="token plain"> customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="exercise-2"></a>Exercise 2<a class="hash-link" href="#exercise-2" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Exercise</h5></div><div class="admonition-content"><ol><li>Create a new table <code>test</code></li><li>Drop the table <code>test</code></li></ol></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="updating-a-row"></a>Updating a row<a class="hash-link" href="#updating-a-row" title="Direct link to heading">#</a></h3><p>The general construction to update a row is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">table</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SET</span><span class="token plain"> column1 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> value1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> column2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> value2 </span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> condition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>For example, to update the name and country of the customers with ID 3:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">UPDATE</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">SET</span><span class="token plain"> name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Bob Marley&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> country</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Jamaica&#x27;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="exercise-3"></a>Exercise 3<a class="hash-link" href="#exercise-3" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Exercise</h5></div><div class="admonition-content"><ul><li>Update the postcode of the hotel named <code>Elder Lake Hotel</code> to <code>L10XYZ</code></li><li>Update the number of rooms of <code>Cozy Hotel</code> to <code>25</code></li><li>For the customer named <code>Nadia Sethuraman</code>, update her address to <code>2 Blue Street</code>, her city to <code>Glasgow</code> and her postcode to <code>G11ABC</code> in one query</li><li>Update all the bookings of customer with ID <code>1</code> for the hotel with ID <code>1</code> to <code>5</code> nights in one query</li></ul></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="deleting-a-row"></a>Deleting a row<a class="hash-link" href="#deleting-a-row" title="Direct link to heading">#</a></h3><p>The syntax to delete a row is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">DELETE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">table</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> condition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>For example, to delete the booking with ID 4:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">DELETE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> bookings </span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>NOTE:</strong> If you don&#x27;t supply a <code>WHERE</code> clause with <code>DELETE</code> or <code>UPDATE</code> the command will be applied to <strong>all</strong> the rows in the table which is rarely what you want.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="exercise-4"></a>Exercise 4<a class="hash-link" href="#exercise-4" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Exercise</h5></div><div class="admonition-content"><ul><li>Delete the booking of customer ID <code>8</code> for the date <code>2020-01-03</code></li><li>Delete all the bookings of customer ID <code>6</code></li><li>Delete the customer with ID <code>6</code></li></ul></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="joining-tables"></a>Joining tables<a class="hash-link" href="#joining-tables" title="Direct link to heading">#</a></h3><p>Sometimes, you will need to retrieve data which are spread in different tables in a single response. For this purpose, you will need to join tables together. The general syntax is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">column1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> B</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">column2 </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> A </span><span class="token keyword" style="font-style:italic">INNER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> B </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">b_id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">B</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>For example, to load all the bookings along with customer data:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">INNER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> bookings </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">customer_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To load all the bookings along with customer data and hotel data:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> bookings</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">INNER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">customer_id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">INNER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> hotels </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> hotels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">hotel_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To load the booking checkin dates for customer ID <code>1</code> along with the customer name and the hotel name:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">checkin_date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">hotels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> bookings</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">INNER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">customer_id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">INNER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> hotels </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> hotels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">hotel_id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="exercise-5"></a>Exercise 5<a class="hash-link" href="#exercise-5" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Exercise</h5></div><div class="admonition-content"><ul><li>Try and understand each of the queries above in your <code>psql</code> prompt</li><li>Retrieve all the bookings along with customer data for bookings starting in 2020</li><li>Retrieve the customer names, booking start dates and number of nights for all customers who booked the hotel name <code>Jade Peaks Hotel</code></li><li>Retrieve all the booking start dates with customer names and hotel names for all bookings for more than 5 nights</li></ul></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="other-useful-operations"></a>Other useful operations<a class="hash-link" href="#other-useful-operations" title="Direct link to heading">#</a></h3><p>Ordering the result:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">table</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">column</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This will sort the returned rows in the ascending order for &quot;column&quot;. To sort them in descending order, use:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">table</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">column</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">DESC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Limiting the number of results returned:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">table</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Returning all customers whose ID is 1, 2, 3 or 4:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(137, 221, 255)">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Query by pattern matching, for example retrieve all customers whose name starts with Bob:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> name </span><span class="token operator" style="color:rgb(137, 221, 255)">LIKE</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Bob%&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can combine different operations together, for example, if you want to retrieve all the booking start dates with the customer names and hotel names for customer names starting with the letter <code>M</code> ordered by hotel name with a limit of 3 results:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"> bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">checkin_date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">hotels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> bookings</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">INNER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> customers </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">customer_id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">INNER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> hotels </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> hotels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bookings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">hotel_id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">WHERE</span><span class="token plain"> customers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name </span><span class="token operator" style="color:rgb(137, 221, 255)">LIKE</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;M%&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> hotels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="exercise-6"></a>Exercise 6<a class="hash-link" href="#exercise-6" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Exercise</h5></div><div class="admonition-content"><ul><li>Retrieve all customers whose name starts with the letter <code>S</code></li><li>Retrieve all hotels which have the word <code>Hotel</code> in their name</li><li>Retrieve the booking start date, customer name, hotel name for the top 5 bookings ordered by number of nights in descending order</li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="integration-with-nodejs"></a>Integration with NodeJS<a class="hash-link" href="#integration-with-nodejs" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction-to-node-postgres"></a>Introduction to node-postgres<a class="hash-link" href="#introduction-to-node-postgres" title="Direct link to heading">#</a></h3><p><em>&quot;node-postgres is a collection of node.js modules for interfacing with your PostgreSQL database.&quot;</em> - <a href="https://node-postgres.com/" target="_blank" rel="noopener noreferrer">https://node-postgres.com/</a></p><p>In the following, we will use <em>node-postgres</em> to...</p><ol><li>Connect to a database</li><li>Send SQL query to the database and get results</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="loading-data-from-a-database-with-a-get-endpoint"></a>Loading data from a database with a GET endpoint<a class="hash-link" href="#loading-data-from-a-database-with-a-get-endpoint" title="Direct link to heading">#</a></h3><p>Let&#x27;s build a brand new NodeJS application with a single GET endpoint to load the list of hotels that you already have in the <code>hotels</code> table of the <code>cyf_hotels</code> database.</p><p>First, create a new NodeJS application that we will call <strong>cyf-hotels-api</strong> (enter <code>server.js</code> when asking about the entry point):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> cyf-hotels-api </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> cyf-hotels-api </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> init</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As before, we will use the Express library to build our API, and the node-postgres library to connect with our database:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> --save express</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> --save pg</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Create a <code>server.js</code> file, import express, initialise the server and start listening for requests:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> express </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;express&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">express</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">3000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Server is listening on port 3000. Ready to accept requests!&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Import pg library and create a new GET endpoint to load the list of hotels:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">Pool</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pg&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> pool </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Pool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    user</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;postgres&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    host</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    database</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cyf_hotels&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    port</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5432</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/hotels&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;SELECT * FROM hotels&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">rows</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword control-flow" style="font-style:italic">catch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">500</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the code above:</p><ul><li>We first import the <code>Pool</code> class from the pg library, which is used to connect to a database</li><li>We create a new pool where we specify the credentials to connect to the cyf_hotels database</li><li>We then create a new /hotels endpoint where we use the method <code>query()</code> to send a SQL query to load all the hotels from the table <code>hotels</code> and return the results with <code>result.rows</code>. You can write any valid SQL query that you learned in the <code>query()</code> method!</li><li>The <code>query()</code> method returns a <em>promise</em>. It is very similar to how the <code>fetch</code> API works in the browser.</li></ul><p>Start your server with <code>node server.js</code> and try to reach the <code>/hotels</code> endpoint to see the list of hotels currently available in your <code>hotels</code> table of your <code>cyf_hotels</code> database. You can try to create/update/delete hotels to verify that your API always returns what is stored in your database.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="coursework"></a>Coursework<a class="hash-link" href="#coursework" title="Direct link to heading">#</a></h2><p>All of the coursework for this week can be found <a href="/db/week-2/homework">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="feedback"></a>Feedback<a class="hash-link" href="#feedback" title="Direct link to heading">#</a></h2><p>Please spend two minutes reviewing this lesson to help us improve it for the future. This feedback will be shared with volunteers.</p><div class="feedback"><div class="feedback__wrapper"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLScq8Zgr0pz7aMDj0D768eCpW798XgtDsKfpA6BquqK5Hdtj4A/viewform?embedded=true&amp;entry.1672476057=SQL&amp;entry.74981796=Week+2" width="640" height="640" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe><center><p>Not loading? Form can be found <a target="_blank" href="https://docs.google.com/forms/d/e/1FAIpQLScq8Zgr0pz7aMDj0D768eCpW798XgtDsKfpA6BquqK5Hdtj4A/viewform?embedded=true&amp;entry.1672476057=SQL&amp;entry.74981796=Week+2">here</a>. Click <a target="_blank" href="https://docs.google.com/forms/d/1F2mB10japkHAPb3H-9Q4YrYH0i61GoMG1tk-P4ZT808/edit">here</a> to get edit access.</p></center></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/CodeYourFuture/Syllabus-V2/edit/master/docs/db/week-2/lesson.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/db/week-1/homework"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Coursework</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/db/week-2/instructors"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Instructor Notes Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-will-we-learn-today" class="table-of-contents__link">What will we learn today?</a></li><li><a href="#learning-objectives" class="table-of-contents__link">Learning Objectives</a></li><li><a href="#more-sql" class="table-of-contents__link">More SQL</a><ul><li><a href="#changing-the-definition-of-a-table" class="table-of-contents__link">Changing the definition of a table</a></li><li><a href="#dropping-a-table" class="table-of-contents__link">Dropping a table</a></li><li><a href="#updating-a-row" class="table-of-contents__link">Updating a row</a></li><li><a href="#deleting-a-row" class="table-of-contents__link">Deleting a row</a></li><li><a href="#joining-tables" class="table-of-contents__link">Joining tables</a></li><li><a href="#other-useful-operations" class="table-of-contents__link">Other useful operations</a></li></ul></li><li><a href="#integration-with-nodejs" class="table-of-contents__link">Integration with NodeJS</a><ul><li><a href="#introduction-to-node-postgres" class="table-of-contents__link">Introduction to node-postgres</a></li><li><a href="#loading-data-from-a-database-with-a-get-endpoint" class="table-of-contents__link">Loading data from a database with a GET endpoint</a></li></ul></li><li><a href="#coursework" class="table-of-contents__link">Coursework</a></li><li><a href="#feedback" class="table-of-contents__link">Feedback</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li><li class="footer__item"><a href="https://docs.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation</a></li><li class="footer__item"><a href="https://github.com/codeyourfuture/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.facebook.com/codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.instagram.com/codeyourfuture_" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram</a></li><li class="footer__item"><a href="https://twitter.com/CodeYourFuture" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 CodeYourFuture</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5d552f86.js"></script>
<script src="/assets/js/main.7ad0a69c.js"></script>
</body>
</html>