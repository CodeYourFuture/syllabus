<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-workshops/mongodb-101">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">MongoDB 101 | CodeYourFuture Syllabus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://syllabus.codeyourfuture.io/workshops/mongodb-101"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MongoDB 101 | CodeYourFuture Syllabus"><meta data-rh="true" name="description" content="What we will learn today?"><meta data-rh="true" property="og:description" content="What we will learn today?"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://syllabus.codeyourfuture.io/workshops/mongodb-101"><link data-rh="true" rel="alternate" href="https://syllabus.codeyourfuture.io/workshops/mongodb-101" hreflang="en"><link data-rh="true" rel="alternate" href="https://syllabus.codeyourfuture.io/workshops/mongodb-101" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159979458-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>



<script src="/js/fix-location.js"></script><link rel="stylesheet" href="/assets/css/styles.41369349.css">
<link rel="preload" href="/assets/js/runtime~main.d8e882f2.js" as="script">
<link rel="preload" href="/assets/js/main.938c8d02.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/Overview">Overview</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/Overview">Modules</a><ul class="dropdown__menu"><li><a href="https://introtocoding.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Intro To Coding<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/fundamentals">Fundamentals</a></li><li><a href="https://personal-development.codeyourfuture.io/em-modules/induction-week" target="_blank" rel="noopener noreferrer" class="dropdown__link">Induction<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/git/overview">Git and Github</a></li><li><a class="dropdown__link" href="/html-css/">HTML-CSS</a></li><li><a class="dropdown__link" href="/js-core-1/">JavaScript Core 1</a></li><li><a class="dropdown__link" href="/js-core-2/">JavaScript Core 2</a></li><li><a class="dropdown__link" href="/js-core-3/">JavaScript Core 3</a></li><li><a class="dropdown__link" href="/react/">React</a></li><li><a class="dropdown__link" href="/node/">Node</a></li><li><a class="dropdown__link" href="/db/">SQL</a></li><li><a class="dropdown__link" href="/finalproject/intro">Final Projects</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Workshops</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/workshops/accessibility/">Accessibility Workshops</a></li><li><a class="dropdown__link" href="/workshops/aws-dynamodb">AWS &amp; DynamoDB Workshop</a></li><li><a class="dropdown__link" href="/workshops/processing-js-workshop">Processing.js Workshop</a></li><li><a class="dropdown__link" href="/workshops/js-testing-workshop">JavaScript Testing Workshop</a></li><li><a class="dropdown__link" href="/workshops/interviews/">Interviews</a></li><li><a href="https://github.com/CodeYourFuture/syllabus/issues/new?assignees=&amp;labels=Workshop&amp;template=workshop-request.md&amp;title=%5BWorkshop%5D" target="_blank" rel="noopener noreferrer" class="dropdown__link">Want to request a workshop?<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Guides</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/guides/paradigm">Our Approach</a></li><li><a class="dropdown__link" href="/guides/asking-questions">Asking Questions</a></li><li><a class="dropdown__link" href="/guides/marking-guide">Marking Guide</a></li><li><a class="dropdown__link" href="/guides/code-style-guide">Code Style Guide</a></li><li><a class="dropdown__link" href="/guides/deployment/">Deploying to Netlify</a></li><li><a class="dropdown__link" href="/guides/coding-101">Coding 101</a></li><li><a class="dropdown__link" href="/guides/escalation-policy">Escalation Policy</a></li><li><a class="dropdown__link" href="/guides/react-cheatsheet">React Cheatsheet</a></li><li><a class="dropdown__link" href="/guides/useful-links">Useful Links</a></li><li><a class="dropdown__link" href="/guides/creating-a-react-app">Creating a React App</a></li><li><a class="dropdown__link" href="/guides/intro-to-tests">Introduction to tests</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Other</a><ul class="dropdown__menu"><li><a href="https://teachertraining.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Teacher Training<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://docs.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Organisation Documentation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://personal-development.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Personal Development<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/contributing/overview">Want to contribute?</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>MongoDB 101</h1></header><p><strong>What we will learn today?</strong></p><ul><li>SQL vs NoSQL</li><li>Why MongoDB?</li><li>Mongo Shell Basic Commands</li><li>MongoDB administration<ul><li>Aggregation</li><li>Replication</li><li>Sharding</li></ul></li><li>What&#x27;s next?</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="before-we-start">Before we start<a href="#before-we-start" class="hash-link" aria-label="Direct link to Before we start" title="Direct link to Before we start">​</a></h2><p>Download and install MongoDB from
<a href="https://www.mongodb.com/download-center#community" target="_blank" rel="noopener noreferrer">https://www.mongodb.com/download-center#community</a>.
Follow the instructions for your platform (Windows, Linux or OS X).</p><p>Open two instances of terminal.
Run <code>mongod</code> in the first instance - this will start MongoDB.</p><p>In the second instance, first download the sample data script:
<code>curl https://gist.githubusercontent.com/agiamas/35b2b954cc942f95709273d3cb9d2cf3/raw/b1bb399942dab287832d41b3b75f6b54c6f00bb1/mongodb_data.js &gt; mongo_data.js</code></p><p>then import the data we just downloaded using</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mongo </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> mongo_data.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, run <code>mongo</code> in the second terminal instance.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lesson-1---sql-and-nosql">Lesson 1 - SQL and NoSQL<a href="#lesson-1---sql-and-nosql" class="hash-link" aria-label="Direct link to Lesson 1 - SQL and NoSQL" title="Direct link to Lesson 1 - SQL and NoSQL">​</a></h2><p>SQL is a well known paradigm in data storage and retrieval, serving us for decades.
Our data was living in mainframes and being stored and processed in isolation.
The nature of Web and mobile has created a paradigm shift in the past decade.
Data has exploded in volume, veracity and velocity.
We have many times semi-structured data of varying quality
and unpredictable volumes of them.</p><p>This has led to a new breed of databases, the NoSQL ones.</p><ul><li>Document databases, e.g. MongoDB</li><li>Graph stores, e.g. Neo4J</li><li>key-value stores, e.g. Redis</li><li>Wide-column stores , e.g. Cassandra</li></ul><p>In this class we will examine Document databases and its most popular one, MongoDB.</p><p>First of all, how does MongoDB compare with traditional SQL queries
that we have learned in the past?</p><p><a target="_blank" href="/assets/files/sql_to_mongo_mapping-26d8f53d2edf919b591aa7969e3e5e29.pdf">MongoDB to SQL Mapping</a></p><p><a href="https://s3.amazonaws.com/info-mongodb-com/sql_to_mongo.pdf" target="_blank" rel="noopener noreferrer">https://s3.amazonaws.com/info-mongodb-com/sql_to_mongo.pdf</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lesson-2---why-mongodb">Lesson 2 - Why MongoDB<a href="#lesson-2---why-mongodb" class="hash-link" aria-label="Direct link to Lesson 2 - Why MongoDB" title="Direct link to Lesson 2 - Why MongoDB">​</a></h2><p>MongoDB is a leader in NoSQL database space.</p><ul><li>de facto leader in NoSQL database space.</li><li>uses JSON, you are familiar with json in FE/Node, you can use it in DB layer too!</li><li>one language to rule them all, part of MEAN stack</li><li>mongodb data types as compared to JSON<ul><li><a href="https://docs.mongodb.com/manual/reference/bson-types/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/reference/bson-types/</a></li><li>We can even query by type!
<a href="https://docs.mongodb.com/manual/reference/operator/query/type/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/reference/operator/query/type/</a></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lesson-3---basic-commands">Lesson 3 - Basic Commands<a href="#lesson-3---basic-commands" class="hash-link" aria-label="Direct link to Lesson 3 - Basic Commands" title="Direct link to Lesson 3 - Basic Commands">​</a></h2><p>Open the terminal that you ran <code>mongo</code>.
First type <code>show dbs</code></p><p>You should see something similar to:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin          0.000GB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">local          0.000GB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then type <code>use cyf</code></p><p>You should now get:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">switched to db cyf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That&#x27;s it! You have created a new database.</p><p>Now type again <code>show dbs</code></p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin          0.000GB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">local          0.000GB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>??? Where is our new database? ???</strong></p><ul><li>Lazy initialisation.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="databases">Databases<a href="#databases" class="hash-link" aria-label="Direct link to Databases" title="Direct link to Databases">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="collections-and-documents">Collections and Documents<a href="#collections-and-documents" class="hash-link" aria-label="Direct link to Collections and Documents" title="Direct link to Collections and Documents">​</a></h2><p>Collections are like tables in SQL databases.
Initialising a collection is also happening lazily like this:</p><p><code>&gt; db.Student.insert({name: &#x27;alex&#x27;})</code></p><p>Now if we run again <code>show dbs</code> after we create a collection with a document
we will see that the database appears in the list.
This is because at the moment that we inserted this document,
the document was created, which in turn created the collection
which in turn created the database.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-1">Exercise 1<a href="#exercise-1" class="hash-link" aria-label="Direct link to Exercise 1" title="Direct link to Exercise 1">​</a></h3><p>Insert a new student with name: Mary</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-2">Exercise 2<a href="#exercise-2" class="hash-link" aria-label="Direct link to Exercise 2" title="Direct link to Exercise 2">​</a></h3><p>Insert a new student with name: Madeline and id=2 (integer)</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-3">Exercise 3<a href="#exercise-3" class="hash-link" aria-label="Direct link to Exercise 3" title="Direct link to Exercise 3">​</a></h3><p>Insert a new student with name: Steve, midterm score of 80 and final score of 100</p><p>Scores should be embedded in a sub-document like this:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">scores:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  midterm: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  final: 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="finding-documents">Finding Documents<a href="#finding-documents" class="hash-link" aria-label="Direct link to Finding Documents" title="Direct link to Finding Documents">​</a></h3><p>Finding a document by a single attribute:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> db.Student.find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">name: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;alex&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Querying embedded attributes:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> db.Student.find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;scores.midterm&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token variable" style="color:rgb(191, 199, 213)">$gte</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">40</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AND / OR queries:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> db.Student.find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">$or</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;scores.midterm&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token variable" style="color:rgb(191, 199, 213)">$gt</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">60</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">, </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;scores.final&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token variable" style="color:rgb(191, 199, 213)">$lte</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">75</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-4a">Exercise 4a<a href="#exercise-4a" class="hash-link" aria-label="Direct link to Exercise 4a" title="Direct link to Exercise 4a">​</a></h3><p>Find the user Mary that you inserted in exercise 1</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-4b">Exercise 4b<a href="#exercise-4b" class="hash-link" aria-label="Direct link to Exercise 4b" title="Direct link to Exercise 4b">​</a></h3><p>Search for students that have scored between [50,80)
in midterm AND <!-- -->[80,100]<!-- --> in final exam</p><p>In these two examples above we can see the operators
GreaterThanEquals &gt;=, GreaterThan &gt; and LessThanEquals &lt;= in action.</p><p>All operators in MongoDB:
<a href="https://docs.mongodb.com/manual/reference/operator/query/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/reference/operator/query/</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="updating-documents">Updating Documents<a href="#updating-documents" class="hash-link" aria-label="Direct link to Updating Documents" title="Direct link to Updating Documents">​</a></h3><p>Updating documents has 2 parts.
The first one is finding the document(s) we want to update
and the second one is modifying their values.</p><p>(!)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db.Student.update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">name: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;alex&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">, </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">name: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;alexander&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>What will this command do?</p><p>REPLACE the first instance of document matching {name:&#x27;alex&#x27;}
with the new {name:&#x27;alexander&#x27;} !!!!</p><p>Definitely not what we want...</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> db.Student.update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">name: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;alex&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">, </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token variable" style="color:rgb(191, 199, 213)">$set</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">name: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;alexander&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can also use other operators like $inc, $mul, $min, $max</p><p><a href="https://docs.mongodb.com/manual/reference/operator/update/#fields" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/reference/operator/update/#fields</a></p><p>(!) Update by default will update only the first instance it matches.
multi:true</p><p>(!) We can get update to update or <em>create</em> the document by using upsert:true</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-5">Exercise 5<a href="#exercise-5" class="hash-link" aria-label="Direct link to Exercise 5" title="Direct link to Exercise 5">​</a></h3><p>Update the student madeline that you created back in exercise 2
to have midterm score of 50 and final score of 100 respectively.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-6">Exercise 6<a href="#exercise-6" class="hash-link" aria-label="Direct link to Exercise 6" title="Direct link to Exercise 6">​</a></h3><p>Update the grades of all students to be 90</p><p>(!) How could we boost the grades of all students by 10%? (!)</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="deleting-documents">Deleting documents<a href="#deleting-documents" class="hash-link" aria-label="Direct link to Deleting documents" title="Direct link to Deleting documents">​</a></h2><p>Deleting a single or more documents is as simple as:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> db.Student.remove</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;_id&quot;</span><span class="token plain">:ObjectId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5a99e1209056c9e237d071d9&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WriteResult</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;nRemoved&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Deleting a whole collection:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db.Student.drop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Deleting a database:
<code>db.dropDatabase()</code> to delete the current database</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-7">Exercise 7<a href="#exercise-7" class="hash-link" aria-label="Direct link to Exercise 7" title="Direct link to Exercise 7">​</a></h3><p>Delete user steve that you created back in exercise 3</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-8">Exercise 8<a href="#exercise-8" class="hash-link" aria-label="Direct link to Exercise 8" title="Direct link to Exercise 8">​</a></h3><p>Delete all users with midterm score less than 80</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lesson-4---administration">Lesson 4 - Administration<a href="#lesson-4---administration" class="hash-link" aria-label="Direct link to Lesson 4 - Administration" title="Direct link to Lesson 4 - Administration">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scripting-the-shell">Scripting the shell<a href="#scripting-the-shell" class="hash-link" aria-label="Direct link to Scripting the shell" title="Direct link to Scripting the shell">​</a></h2><p>There are several ways to write scripts for MongoDB shell:</p><ul><li>use <code>mongo &lt; mongo_script.sh</code></li><li>use <code>mongo mongo_script.js</code></li></ul><p>What&#x27;s the difference?</p><p>The first one will pipe in our script and execute its lines one by one
as if we were typing them in Mongo shell.</p><p>The second one will evaluate our javascript and attempt to run it with Mongo shell.</p><p><strong>Always</strong> test scripts locally in MongoDB (and in general).</p><p><strong>Always</strong> test in staging before production.</p><p><strong>Always</strong> keep backups in production.
And test that you can restore from these backups regualarly.</p><p>All of these are important for every database system
but even more important in MongoDB as...</p><p><strong>THERE IS NO ROLLBACK!</strong> There are no transactions.
Once you delete something, it&#x27;s gone.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-9">Exercise 9<a href="#exercise-9" class="hash-link" aria-label="Direct link to Exercise 9" title="Direct link to Exercise 9">​</a></h3><p>Using MongoDB shell, create a script to output in a new collection
named BoostedStudents one document for every document in Student collection
with their final grade being boosted by 10%.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="aggregation">Aggregation<a href="#aggregation" class="hash-link" aria-label="Direct link to Aggregation" title="Direct link to Aggregation">​</a></h2><p>Why aggregation framework?</p><p>Aggregation framework in MongoDB is modelled
after the familiar concept of data processing pipelines.
Documents enter the pipeline with the MongoDB structure
and exit the other end transformed into BSON documents with calculated fields.
Commands in a pipeline are executed sequentially
and in the order that they appear in the array [].</p><table><thead><tr><th>SQL</th><th>Aggregation framework</th></tr></thead><tbody><tr><td>WHERE / HAVING</td><td>\$match</td></tr><tr><td>GROUP BY</td><td>\$group</td></tr><tr><td>SELECT</td><td>\$project</td></tr><tr><td>ORDER BY</td><td>\$sort</td></tr><tr><td>LIMIT</td><td>\$limit</td></tr><tr><td>sum() / count()</td><td>\$sum</td></tr><tr><td>average()</td><td>\$avg</td></tr><tr><td>join</td><td>\$lookup</td></tr></tbody></table><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db.students.aggregate([</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   1.  { $match: { name: {$regex: /^aA/} } },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   2.  { $group: { _id: &quot;$name&quot;, average: { $avg: &quot;$scores.final&quot; } } },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   3.  { $sort: { average: -1 } },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   4.  { $project: { name: 1, average: 1 } }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>What does the pipeline above do?</p><ol><li>matches all documents with a name starting from aA</li><li>groups them by average final score</li><li>sorts them by average score</li><li>projects(selects) name and average score in the output</li></ol><p>What&#x27;s the output like?</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">_id: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">, name: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">, average: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More information: <a href="https://docs.mongodb.com/manual/aggregation/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/aggregation/</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-10">Exercise 10<a href="#exercise-10" class="hash-link" aria-label="Direct link to Exercise 10" title="Direct link to Exercise 10">​</a></h3><p>Now let&#x27;s redo Exercise 9 using the aggregation framework.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="replication">Replication<a href="#replication" class="hash-link" aria-label="Direct link to Replication" title="Direct link to Replication">​</a></h2><p>Replication in MongoDB is used to increase redundancy and data availability.
In its essence it&#x27;s a way for 3 or more (or even 2 with some caveats..)
servers to keep the same copy of data.</p><p><img loading="lazy" alt="replication diagram" src="/assets/images/replica-set-read-write-operations-primary.bakedsvg-b0636f564771ff7599c18ad45c579f74.svg" width="620" height="507" class="img_ev3q"></p><p>Writes always go to the primary and get propagated <em>asynchronously</em> to the secondaries.</p><p>Reads can go to the primary or any of the secondaries.</p><p>Election process:</p><p>Replica sets implement by default automatic failover.
If a primary server fails, the remaining secondaries will elect the new primary.
This will by default be the secondary that is most &quot;up to date&quot; with the primary
but we can affect (rig) the election process
by assigning different votes to each server.</p><p>More information:
<a href="https://docs.mongodb.com/manual/core/replica-set-elections/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/core/replica-set-elections/</a></p><p>Using replication we can perform a few interesting tasks:</p><ul><li>delayed replica for backup.
Delay backups by an hour, enabling us to recover from dropping a database in production</li><li>hidden replicas for reporting.
These replicas will never become primaries
so we can safely apply read load to them for reporting purposes</li><li>replicas in different location for disaster recovery</li><li>replicas in different location to be closer to our users</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sharding">Sharding<a href="#sharding" class="hash-link" aria-label="Direct link to Sharding" title="Direct link to Sharding">​</a></h2><p>Sharding is a method for horizontal scaling that MongoDB uses.
It essentially partitions data across the shard key in different servers
thereby distributing the read and write load.</p><p>What is horizontal scaling?</p><p>When our data exceeds the disk space, I/O capacity and/or memory available
in a single server we have two options:</p><ol><li>Buy/Rent a bigger server. This is vertical scaling.
It&#x27;s of course the easiest way to scale
but does not scale linearly in terms of cost and capacity.</li><li>Distribute our data across different servers of the same initial capacity.
This is called horizontal scaling, is more difficult to achieve
but theoretically if we achieve linear scaling
then our system can be <strong>infinitely scaleable</strong>.</li></ol><p>With MongoDB it&#x27;s important to understand that we will start with #1
for as long as it makes financial sense.
If we are on AWS it will probably be easier to tweak our replica set
from S to M to L sized servers rether than implement sharding.
At some point though, we should start planning for sharding,
definitely sooner rather than later.</p><p><img loading="lazy" alt="sharded architecture" src="/assets/images/sharded-cluster-production-architecture.bakedsvg-e73a63fbf0ad53e251a1747a52138f59.svg" width="620" height="440" class="img_ev3q"></p><p>Sharding as we can see from the diagram above is not a trivial task.
We need router(s) config servers and shards.</p><p>Router:</p><p>The router is essentially our query server.
Queries no longer go to individual servers
but must go to the router which will decide which server(s) hold our data.</p><p>Config Servers:</p><p>Config servers are holding configuration information for the whole cluster.
They must be deployed as a replica set in order to achieve high availability.</p><p>Shards:</p><p>Each shard is essentially a replica set.
Each shard holds a cut of our data
and all the shards together hold the total of our data.</p><p>More information:
<a href="https://docs.mongodb.com/manual/sharding/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/sharding/</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="whats-next">What&#x27;s next<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s next" title="Direct link to What&#x27;s next">​</a></h2><p>If you have time and interest,
please register to this class or any other class in MongoDB university.</p><p>All classes are <strong>free</strong> and on average require 6-10 hours of time per week.</p><p><a href="https://university.mongodb.com/courses/M001/about" target="_blank" rel="noopener noreferrer">https://university.mongodb.com/courses/M001/about</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="shameless-plug">Shameless plug<a href="#shameless-plug" class="hash-link" aria-label="Direct link to Shameless plug" title="Direct link to Shameless plug">​</a></h3><p>I am also the author of the Mastering MongoDB 3.X book by Packt publishing,
available <a href="https://www.packtpub.com/big-data-and-business-intelligence/mastering-mongodb-3x" target="_blank" rel="noopener noreferrer">here</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/CodeYourFuture/Syllabus-V2/edit/master/docs/workshops/mongodb-101.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-we-start" class="table-of-contents__link toc-highlight">Before we start</a></li><li><a href="#lesson-1---sql-and-nosql" class="table-of-contents__link toc-highlight">Lesson 1 - SQL and NoSQL</a></li><li><a href="#lesson-2---why-mongodb" class="table-of-contents__link toc-highlight">Lesson 2 - Why MongoDB</a></li><li><a href="#lesson-3---basic-commands" class="table-of-contents__link toc-highlight">Lesson 3 - Basic Commands</a></li><li><a href="#databases" class="table-of-contents__link toc-highlight">Databases</a></li><li><a href="#collections-and-documents" class="table-of-contents__link toc-highlight">Collections and Documents</a><ul><li><a href="#exercise-1" class="table-of-contents__link toc-highlight">Exercise 1</a></li><li><a href="#exercise-2" class="table-of-contents__link toc-highlight">Exercise 2</a></li><li><a href="#exercise-3" class="table-of-contents__link toc-highlight">Exercise 3</a></li><li><a href="#finding-documents" class="table-of-contents__link toc-highlight">Finding Documents</a></li><li><a href="#exercise-4a" class="table-of-contents__link toc-highlight">Exercise 4a</a></li><li><a href="#exercise-4b" class="table-of-contents__link toc-highlight">Exercise 4b</a></li><li><a href="#updating-documents" class="table-of-contents__link toc-highlight">Updating Documents</a></li><li><a href="#exercise-5" class="table-of-contents__link toc-highlight">Exercise 5</a></li><li><a href="#exercise-6" class="table-of-contents__link toc-highlight">Exercise 6</a></li></ul></li><li><a href="#deleting-documents" class="table-of-contents__link toc-highlight">Deleting documents</a><ul><li><a href="#exercise-7" class="table-of-contents__link toc-highlight">Exercise 7</a></li><li><a href="#exercise-8" class="table-of-contents__link toc-highlight">Exercise 8</a></li></ul></li><li><a href="#lesson-4---administration" class="table-of-contents__link toc-highlight">Lesson 4 - Administration</a></li><li><a href="#scripting-the-shell" class="table-of-contents__link toc-highlight">Scripting the shell</a><ul><li><a href="#exercise-9" class="table-of-contents__link toc-highlight">Exercise 9</a></li></ul></li><li><a href="#aggregation" class="table-of-contents__link toc-highlight">Aggregation</a><ul><li><a href="#exercise-10" class="table-of-contents__link toc-highlight">Exercise 10</a></li></ul></li><li><a href="#replication" class="table-of-contents__link toc-highlight">Replication</a></li><li><a href="#sharding" class="table-of-contents__link toc-highlight">Sharding</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s next</a><ul><li><a href="#shameless-plug" class="table-of-contents__link toc-highlight">Shameless plug</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/codeyourfuture/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/codeyourfuture_" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/CodeYourFuture" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 CodeYourFuture</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d8e882f2.js"></script>
<script src="/assets/js/main.938c8d02.js"></script>
</body>
</html>