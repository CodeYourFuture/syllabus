<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-workshops/aws-dynamodb">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">AWS &amp; DynamoDB Workshop | CodeYourFuture Syllabus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://syllabus.codeyourfuture.io/workshops/aws-dynamodb"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="AWS &amp; DynamoDB Workshop | CodeYourFuture Syllabus"><meta data-rh="true" name="description" content="What we will learn today?"><meta data-rh="true" property="og:description" content="What we will learn today?"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://syllabus.codeyourfuture.io/workshops/aws-dynamodb"><link data-rh="true" rel="alternate" href="https://syllabus.codeyourfuture.io/workshops/aws-dynamodb" hreflang="en"><link data-rh="true" rel="alternate" href="https://syllabus.codeyourfuture.io/workshops/aws-dynamodb" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159979458-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>



<script src="/js/fix-location.js"></script><link rel="stylesheet" href="/assets/css/styles.41369349.css">
<link rel="preload" href="/assets/js/runtime~main.437d8933.js" as="script">
<link rel="preload" href="/assets/js/main.13702b61.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="CodeYourFuture Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/Overview">Overview</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/Overview">Modules</a><ul class="dropdown__menu"><li><a href="https://introtocoding.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Intro To Coding<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/fundamentals">Fundamentals</a></li><li><a href="https://personal-development.codeyourfuture.io/em-modules/induction-week" target="_blank" rel="noopener noreferrer" class="dropdown__link">Induction<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/git/overview">Git and Github</a></li><li><a class="dropdown__link" href="/html-css/">HTML-CSS</a></li><li><a class="dropdown__link" href="/js-core-1/">JavaScript Core 1</a></li><li><a class="dropdown__link" href="/js-core-2/">JavaScript Core 2</a></li><li><a class="dropdown__link" href="/js-core-3/">JavaScript Core 3</a></li><li><a class="dropdown__link" href="/react/">React</a></li><li><a class="dropdown__link" href="/node/">Node</a></li><li><a class="dropdown__link" href="/db/">SQL</a></li><li><a class="dropdown__link" href="/finalproject/intro">Final Projects</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Workshops</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/workshops/accessibility/">Accessibility Workshops</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/workshops/aws-dynamodb">AWS &amp; DynamoDB Workshop</a></li><li><a class="dropdown__link" href="/workshops/processing-js-workshop">Processing.js Workshop</a></li><li><a class="dropdown__link" href="/workshops/js-testing-workshop">JavaScript Testing Workshop</a></li><li><a class="dropdown__link" href="/workshops/interviews/">Interviews</a></li><li><a href="https://github.com/CodeYourFuture/syllabus/issues/new?assignees=&amp;labels=Workshop&amp;template=workshop-request.md&amp;title=%5BWorkshop%5D" target="_blank" rel="noopener noreferrer" class="dropdown__link">Want to request a workshop?<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Guides</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/guides/paradigm">Our Approach</a></li><li><a class="dropdown__link" href="/guides/asking-questions">Asking Questions</a></li><li><a class="dropdown__link" href="/guides/marking-guide">Marking Guide</a></li><li><a class="dropdown__link" href="/guides/code-style-guide">Code Style Guide</a></li><li><a class="dropdown__link" href="/guides/deployment-netlify/">Deploying to Netlify</a></li><li><a class="dropdown__link" href="/guides/deployment-render">Deploying to Render</a></li><li><a class="dropdown__link" href="/guides/coding-101">Coding 101</a></li><li><a class="dropdown__link" href="/guides/escalation-policy">Escalation Policy</a></li><li><a class="dropdown__link" href="/guides/react-cheatsheet">React Cheatsheet</a></li><li><a class="dropdown__link" href="/guides/useful-links">Useful Links</a></li><li><a class="dropdown__link" href="/guides/creating-a-react-app">Creating a React App</a></li><li><a class="dropdown__link" href="/guides/intro-to-tests">Introduction to tests</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Other</a><ul class="dropdown__menu"><li><a href="https://teachertraining.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Teacher Training<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://docs.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Organisation Documentation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://personal-development.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Personal Development<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/contributing/overview">Want to contribute?</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AWS &amp; DynamoDB Workshop</h1></header><p><strong>What we will learn today?</strong></p><ul><li>Databases overview</li><li>MongoDB</li><li>Mongo Shell</li><li>Mongo with Node</li></ul><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="before-we-start">Before we start<a href="#before-we-start" class="hash-link" aria-label="Direct link to Before we start" title="Direct link to Before we start">​</a></h2><p>Download and install MongoDb from <a href="https://www.mongodb.com/download-center#community" target="_blank" rel="noopener noreferrer">https://www.mongodb.com/download-center#community</a>.
Follow the instructions for your platform (Windows, Linux or OS X).</p><p>Also download and install <em>RoboMongo</em> from <a href="https://robomongo.org/download" target="_blank" rel="noopener noreferrer">https://robomongo.org/download</a>.</p><p>Open two instances of terminal.
Run <code>mongod</code>—this will start MongoDB then run <code>mongo</code> on the other window.</p><p>In the <code>mongo</code> shell (terminal), run the command <code>version()</code> and you should get
the version of Mongo printed on the terminal</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="databases-overview">Databases overview<a href="#databases-overview" class="hash-link" aria-label="Direct link to Databases overview" title="Direct link to Databases overview">​</a></h2><blockquote><p>Discussion:</p><ul><li>What is a database role?</li><li>Why do we need a database? Why not just use the file system?</li><li>What would make a good database?</li></ul></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="why-a-database">Why a database<a href="#why-a-database" class="hash-link" aria-label="Direct link to Why a database" title="Direct link to Why a database">​</a></h2><ul><li>Databases can store very large numbers of records efficiently (they take up
little space).</li><li>You can have strucutre on your data</li><li>You can query for data in a database, you can sort data, add/edit/delete data</li><li>You can optimise a database to make searches (queries) quicker</li><li>You can relate pieces of data to each other to avoid duplication which makes
your information more reliable and less prone to errors</li><li>ACID<blockquote><p>In computer science, ACID (Atomicity, Consistency, Isolation, Durability) is
a set of properties of database transactions intended to guarantee validity
even in the event of errors, power failures, etc.</p></blockquote></li><li>Databases can handle very large data sets.</li><li>Databases are concurrent; multiple users can use them at the same time without
corrupting the data.</li><li>Databases scale well</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="relational-and-non-relational-databases">Relational and non-relational databases<a href="#relational-and-non-relational-databases" class="hash-link" aria-label="Direct link to Relational and non-relational databases" title="Direct link to Relational and non-relational databases">​</a></h2><p>There are mainly two flavours of databases used commercially these days.
<strong>Relational</strong> (SQL) and <strong>non-relational</strong> (NoSQL) databases.</p><p>Relational databases include MySQL, Postgres, Microsoft SQL Server, Oracle
Database and many others. They&#x27;ve been around for a long time and they&#x27;re used
for all kind of applications.</p><p>Non-relational databases are relatively new and they include the likes of
MongoDB, Casandra, Neo4j etc...</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mongo">Mongo<a href="#mongo" class="hash-link" aria-label="Direct link to Mongo" title="Direct link to Mongo">​</a></h2><blockquote><p>MongoDB is a free and open-source cross-platform document-oriented database
program. Classified as a NoSQL database program, MongoDB uses JSON-like
documents.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bson-json-like-document">BSON (JSON-like document)<a href="#bson-json-like-document" class="hash-link" aria-label="Direct link to BSON (JSON-like document)" title="Direct link to BSON (JSON-like document)">​</a></h2><p>In a Relational database, information is organised in <em>rows</em> in <em>tables</em> with
predefined <em>columns</em>.</p><p>In a non-relational database, information is organised in <em>documents</em>. MongoDB
stores data records in a format similar to JSON called BSON. BSON is a binary
representation of JSON documents, though it contains more data types than JSON.</p><p><img loading="lazy" src="https://docs.mongodb.com/manual/_images/crud-annotated-document.bakedsvg.svg" alt="BSON object" class="img_ev3q"></p><p>Let&#x27;s look at this database table <em>Students</em> containing information about
students participating in a course <img loading="lazy" alt="students table" src="/assets/images/table-example-f4794a6fdcfa1602e3fa7935ab67a734.png" width="3096" height="910" class="img_ev3q"></p><blockquote><p>Exercise: What are the columns, rows and tables?</p></blockquote><p><img loading="lazy" alt="SQL and MongoDB correspondence" src="/assets/images/SQL-MongoDB-f91f72260b3377e964110e13eb105b09.png" width="702" height="362" class="img_ev3q"></p><blockquote><p>Exercise: Open <a href="https://jsonlint.com/" target="_blank" rel="noopener noreferrer">https://jsonlint.com/</a> and write a JSON representation of two
rows in the Students table example. Click <em>Validate JSON</em> and make sure the
document is valid.</p><ul><li>Are there any alternative representations you can think of?</li></ul></blockquote><p><strong>BSON</strong> is very similar to JSON. It contains more data types than JSON, it also
allows the field names to not be quoted. Read more information about the
format: <a href="https://docs.mongodb.com/manual/core/document/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/core/document/</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mongo-shell">Mongo Shell<a href="#mongo-shell" class="hash-link" aria-label="Direct link to Mongo Shell" title="Direct link to Mongo Shell">​</a></h2><p>Let&#x27;s go to <code>mongo</code> shell and start interacting with our database system.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-create-a-database">1. Create a database<a href="#1-create-a-database" class="hash-link" aria-label="Direct link to 1. Create a database" title="Direct link to 1. Create a database">​</a></h3><p>On the shell, type the command <code>use profile</code> The shell should respond with
<strong>switched to db profile</strong>. At this stage, the database does not necessarily
exist once we start adding information (collections) then the database will be
created and the collection added to them.</p><p>To check the current database, run <code>db</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-create-a-collection">2. Create a collection<a href="#2-create-a-collection" class="hash-link" aria-label="Direct link to 2. Create a collection" title="Direct link to 2. Create a collection">​</a></h3><p>Now let&#x27;s create our first collection. Make sure you&#x27;re using the <strong>profile</strong>
database. Run <code>db</code> and it should print <strong>profile</strong> on the terminal.</p><p>We will insert a simple document representing a student.</p><blockquote><p><code>db.students.insertOne({ name: &#x27;Habiiba&#x27;, country: &#x27;Somalia&#x27;, assignedMentors: [&#x27;Ashleigh&#x27;] })</code></p></blockquote><p>You should get a confirmation with the number of records inserted.</p><p>You can also insert more than one document at a time. Run this command</p><blockquote><p><code>db.students.insertMany([{ name: &#x27;Khalid&#x27;, country: &#x27;Yemen&#x27; }, { name: &#x27;Yohannes&#x27;, country: &#x27;Ethiopia&#x27;, assignedMentors: [&#x27;Michael&#x27;] }])</code></p></blockquote><p>run the command <code>db.students.count()</code> and you should get that you have 3
documents.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-querying-data">3. Querying data<a href="#3-querying-data" class="hash-link" aria-label="Direct link to 3. Querying data" title="Direct link to 3. Querying data">​</a></h3><p>Querying is one of the most important reasons that we use databases. SQL is the
language used for querying relational databases, In MongoDB, we can use the
method <code>db.collection.find</code>, passing a query in the form of a JSON object as a
first parameter.</p><p>Let&#x27;s try few queries:</p><p>Get all the students from Ethiopia.</p><blockquote><p><code>db.students.find({country: &#x27;Ethiopia&#x27;})</code></p></blockquote><p>We can also provide an extra parameter <code>projection</code> to define what fields we
want back from the query.</p><p>For example, if we&#x27;re only interested in the name</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">students</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">country</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Ethiopia&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// you can also use { name: true }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s add another two students to the collection</p><p><code>db.students.insertOne({ name: &#x27;Mohamed&#x27;, country: &#x27;Sudan&#x27;, assignedMentors: [&#x27;Michael&#x27;] })</code></p><p>and</p><p><code>db.students.insertOne({ name: &#x27;Mohamed&#x27;, country: &#x27;Syria&#x27;, assignedMentors: [&#x27;Michael&#x27;, &#x27;Ashleigh&#x27;] })</code></p><p>Now let&#x27;s query for all the students that have <strong>Michael</strong> as mentor.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">students</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">assignedMentors</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Michael&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>What if we want to find any student whose name is &quot;Mohamed&quot; AND whose country is
&quot;Sudan&quot;. You can then use the <strong>logical query operator \$and</strong>.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">students</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">$and</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mohamed&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">country</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Sudan&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that name and country are case-sensitive.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise">Exercise<a href="#exercise" class="hash-link" aria-label="Direct link to Exercise" title="Direct link to Exercise">​</a></h3><ol><li>Find all students for whom <strong>Ashleigh</strong> is an assigned mentor.</li><li>Find all students that have <strong>Michael</strong> as their only mentor</li><li>Find students whose name is <strong>Mohamed</strong> OR <strong>Michael</strong> is their only mentor</li><li>Read about the
<a href="https://docs.mongodb.com/manual/reference/operator/query/in/#op._S_in" target="_blank" rel="noopener noreferrer">\$in operator</a>
and use it to find students whose country is either Sudan or Ethiopia.</li><li>Look at the other
<a href="https://docs.mongodb.com/manual/reference/operator/query-comparison/" target="_blank" rel="noopener noreferrer">Comparison Query Operators</a>
and the
<a href="https://docs.mongodb.com/manual/reference/operator/query-logical/" target="_blank" rel="noopener noreferrer">Logical Query Operators</a>
and use few of them.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="key-concepts-so-far">Key Concepts so far<a href="#key-concepts-so-far" class="hash-link" aria-label="Direct link to Key Concepts so far" title="Direct link to Key Concepts so far">​</a></h2><p>In Mongo, a <strong>database</strong> contains <strong>collections</strong> that contain <strong>BSON
documents</strong>. We can use the <strong>mongo shell</strong> to interact with our Mongo
databases. The <strong>query documents</strong> are used to specify a selection filter using
<a href="https://docs.mongodb.com/manual/reference/operator/query/" target="_blank" rel="noopener noreferrer"><strong>query operators</strong></a>
to search for documents in the collections.</p><blockquote><p>Checkpoint: Do you understand all the words highlighed in the last paragraph?</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="node-with-mongo">Node with Mongo<a href="#node-with-mongo" class="hash-link" aria-label="Direct link to Node with Mongo" title="Direct link to Node with Mongo">​</a></h2><p>So far we&#x27;ve been connecting to Mongo using the Mongo shell. Mongo has drivers
for most major programming languages but it&#x27;s especially popular with NodeJS
applications as its API and Query model is very close to JavaScript syntax and
patterns.</p><p>Let&#x27;s start wiring Node with MongoDB as a datastore.</p><ol><li><p>Fork and Clone the project
<a href="https://github.com/CodeYourFuture/mongo-node-workshop" target="_blank" rel="noopener noreferrer">https://github.com/CodeYourFuture/mongo-node-workshop</a>.
run <code>npm install</code> then <code>npm run dev</code> to run the application with autoreload -
Go to the browser and make sure it&#x27;s up and running.</p></li><li><p>Install the MongoDB Node.js Driver <code>npm install mongodb --save</code></p></li><li><p>Let&#x27;s add an endpoint <code>api/students</code> that returns a <code>json</code> containing all the
students that we&#x27;ve been saving to the database from the shell.</p></li></ol><p>Go to the file <code>controllers/apiController</code>, on top of the file, require the
module</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token maybe-class-name">MongoClient</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mongodb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">MongoClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>then add an endpoint for <code>/students</code></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">router</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/students&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mongoConnection </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mongodb://localhost:27017/profile&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token maybe-class-name">MongoClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mongoConnection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> cursor </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">collection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;students&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    cursor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> students</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">students</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Go to your browser <code>/api/students</code> and you should see a JSON containing the
documents we&#x27;ve added to the <em>students</em> collection earlier.</p><blockquote><p>Exercise: Let&#x27;s step through the previous code and understand it line by line.</p><ul><li>What is a Mongo conection string?</li></ul></blockquote><p>The <a href="https://docs.mongodb.com/manual/reference/connection-string/" target="_blank" rel="noopener noreferrer">connection string</a>
follows this format:
<code>mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]</code>.
What parts do you have in our connection string right now?</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-part-1">Exercise part 1<a href="#exercise-part-1" class="hash-link" aria-label="Direct link to Exercise part 1" title="Direct link to Exercise part 1">​</a></h3><p>Now let&#x27;s change the <code>api/posts</code> to also use the mongo database instead of the
json file under /data.</p><ol><li><p>First step is to save the <em>posts</em> in the database. Similar to what we did
with <em>students</em> collection, use the Mongo shell to create a new collection
called <em>posts</em> and use <strong>insertMany</strong> to insert all the documents.</p></li><li><p>Change the endpoint <code>/api/posts</code> to read its contents from the database (very
similar code to what we wrote in <code>/api/students</code> endpoint). Go to
<code>http://localhost:3000/api/posts</code> and make sure you see the posts. Update a
document in the database (either check the documentation for
<a href="https://docs.mongodb.com/manual/reference/operator/update/set/#set-top-level-fields" target="_blank" rel="noopener noreferrer">update</a>
or use RoboMongo) and see if it gets reflected.</p></li><li><p>Once you have the endpoint running, delete the json <code>data/posts.json</code>.</p></li><li><p>Now if you go to the root of your application <code>http://localhost:3000</code>, you
will encounter an error as it will still try to read from the file system but
we deleted the file. Update the <code>/</code> endpoint to also get the Posts from the
database.</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-part-2-refactor-the-code">Exercise part 2: refactor the code<a href="#exercise-part-2-refactor-the-code" class="hash-link" aria-label="Direct link to Exercise part 2: refactor the code" title="Direct link to Exercise part 2: refactor the code">​</a></h3><p>Even though our code does what&#x27;s supposed to do, it has several issues. We have
a lot of duplicate code—both endpoints GET <code>/api/posts</code> and GET <code>/</code> do the
same call to the database and then do <em>something</em> with it. It&#x27;s only that
<em>something</em> (the callback) that is different so let&#x27;s refactor the code to
eliminate duplication (DRY).</p><ol><li><p>The variable <code>mongoConnection</code> is declared multiple times, that means that if
the connection string changes then we need to change multiple places causing
possibilities of missing one instance and causing errors. Let&#x27;s declare it
once and use it in the rest of the app.</p><ul><li>Why is it bad to have duplicate code?</li></ul></li><li><p>Extract the Mongo calls to seperate functions. Extract the route for
<code>/api/students</code> into a function named <code>getStudents</code></p><ul><li>What will the function signature be?</li><li>Remember the <strong>Single Responsibility Principle</strong>—the route handlers have
multiple responsibilities right now: Connecting to Mongo, getting the data
then sending it back as a response.</li></ul></li><li><p>Move the new function to a new file called <code>helpers/db-client.js</code>, export the
functions and use them in the original file.</p><ul><li>Do you remember how we create modules and use them? <code>module.exports</code> and
<code>require</code>.</li></ul></li><li><p>Do the same for the <code>/posts</code></p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exercise-part-3-deploy-our-app">Exercise Part 3: Deploy our app<a href="#exercise-part-3-deploy-our-app" class="hash-link" aria-label="Direct link to Exercise Part 3: Deploy our app" title="Direct link to Exercise Part 3: Deploy our app">​</a></h3><p>Let&#x27;s deploy our Database-Driven Application to Heroku. If you don&#x27;t remember
the steps, refresh your memory from
<a href="/node/week-3/lesson#heroku">a previous lesson</a>.</p><p>Once you&#x27;re finished, Go to your application on heroku and see if it is working
properly.</p><p><em>It should not be working.</em></p><p>Can you have a guess on what went wrong? To see what&#x27;s happening on the heroku
server, run <code>heroku logs</code> from the terminal and check the logs.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mongo-on-heroku">Mongo on Heroku<a href="#mongo-on-heroku" class="hash-link" aria-label="Direct link to Mongo on Heroku" title="Direct link to Mongo on Heroku">​</a></h2><p>Heroku, AWS and other cloud services allows us to use databases and other
services on the cloud without having to maintain physical servers making it easy
to scale, monitor costs and build good solutions in general.</p><p>We&#x27;ve already used <strong>DynamoDB</strong> on AWS. This week, we&#x27;ll do <strong>MongoDB</strong>.</p><ol><li><p>Go to Heroku dashboard
<a href="https://dashboard.heroku.com" target="_blank" rel="noopener noreferrer">https://dashboard.heroku.com</a></p></li><li><p>Click on your app name in the dashboard. Go to <em>Resources</em>, under <em>addons</em>,
search for <em>mLab MongoDB</em> and choose it. When you&#x27;re prompted with this
screen—click on <strong>Provision</strong>.</p><p><img loading="lazy" alt="MongoDB on Heroku" src="/assets/images/heroku-mongo-ceb3b1f2c97c395de26be8357cfa5fb5.png" width="1060" height="892" class="img_ev3q"></p><p>The new MongoDB service will appear under Resources-you can click on it and it
will take you to a web interface to administer your MongoDB instance.</p></li><li><p>Go to the <em>Settings</em> and click on <strong>Reveal Config Vars</strong>. You should see the
a variable called MongoDB_URI—that is the connection string for the MongoDB
instance on Heroku (on mLab used by Heroku).</p><blockquote><p>So how can we use this connection string instead of our local one?</p></blockquote></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="environment-variables">Environment variables<a href="#environment-variables" class="hash-link" aria-label="Direct link to Environment variables" title="Direct link to Environment variables">​</a></h2><p>In NodeJS, The <code>process.env</code> property returns an object containing the user
environment. Environment variables allow us to configure different aspects of
our application based on the environment where it&#x27;s running—so for instance,
when we run our application locally, we want to connect to the local MongoDB but
on Heroku, we want to connect to a different one.</p><p>Connection strings are typically saved and used as Environment variables, other
typical uses are with passwords, secrets, URLs of other services etc... Anything
that is environment specific and that shouldn&#x27;t live in the source code.</p><blockquote><p><strong>Security tip</strong>: Never add passwords, connection strings or any sensitive
information in your source code, always use an Environment variable.</p></blockquote><p>Services like Heroku and AWS can then use these environment variables to
configure aspects of the application.</p><blockquote><p>We&#x27;ve already used one Environment variable for Heroku before—what was it?</p><p>Exercise: Use the environment <code>MongoDB_URI</code> to connect to MongoDB on Heroku,
but fallback to <strong>localhost connection string</strong> if there is no environment
variable provided.</p></blockquote><ul><li>Commit and push the changes to Heroku and see if it works.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="coursework">Coursework<a href="#coursework" class="hash-link" aria-label="Direct link to Coursework" title="Direct link to Coursework">​</a></h2><p>Refer to the MongoDB/Node workshop for the Homework tasks -
<a href="https://github.com/CodeYourFuture/mongo-node-workshop" target="_blank" rel="noopener noreferrer">https://github.com/CodeYourFuture/mongo-node-workshop</a></p><ul><li>Read <a href="https://www.upguard.com/articles/mysql-vs-mongodb" target="_blank" rel="noopener noreferrer">https://www.upguard.com/articles/mysql-vs-mongodb</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><ul><li>Why use a database:
<a href="https://softwareengineering.stackexchange.com/questions/190482/why-use-a-database-instead-of-just-saving-your-data-to-disk" target="_blank" rel="noopener noreferrer">https://softwareengineering.stackexchange.com/questions/190482/why-use-a-database-instead-of-just-saving-your-data-to-disk</a></li><li>Databases and Collections:
<a href="https://docs.mongodb.com/manual/core/databases-and-collections/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/core/databases-and-collections/</a></li><li>Documents in MongoDB:
<a href="https://docs.mongodb.com/manual/core/document/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/core/document/</a></li><li>Practice on a web Mongo shell:
<a href="https://www.tutorialspoint.com/mongodb_terminal_online.php" target="_blank" rel="noopener noreferrer">https://www.tutorialspoint.com/mongodb_terminal_online.php</a></li><li>Environment Variables:
<a href="https://www.twilio.com/blog/2017/08/working-with-environment-variables-in-node-js.html" target="_blank" rel="noopener noreferrer">https://www.twilio.com/blog/2017/08/working-with-environment-variables-in-node-js.html</a></li><li>MongoDB SQL comparison:
<a href="https://docs.mongodb.com/manual/reference/sql-comparison/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/reference/sql-comparison/</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/CodeYourFuture/Syllabus-V2/edit/master/docs/workshops/aws-dynamodb-workshop.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-we-start" class="table-of-contents__link toc-highlight">Before we start</a></li><li><a href="#databases-overview" class="table-of-contents__link toc-highlight">Databases overview</a></li><li><a href="#why-a-database" class="table-of-contents__link toc-highlight">Why a database</a></li><li><a href="#relational-and-non-relational-databases" class="table-of-contents__link toc-highlight">Relational and non-relational databases</a></li><li><a href="#mongo" class="table-of-contents__link toc-highlight">Mongo</a></li><li><a href="#bson-json-like-document" class="table-of-contents__link toc-highlight">BSON (JSON-like document)</a></li><li><a href="#mongo-shell" class="table-of-contents__link toc-highlight">Mongo Shell</a><ul><li><a href="#1-create-a-database" class="table-of-contents__link toc-highlight">1. Create a database</a></li><li><a href="#2-create-a-collection" class="table-of-contents__link toc-highlight">2. Create a collection</a></li><li><a href="#3-querying-data" class="table-of-contents__link toc-highlight">3. Querying data</a></li><li><a href="#exercise" class="table-of-contents__link toc-highlight">Exercise</a></li></ul></li><li><a href="#key-concepts-so-far" class="table-of-contents__link toc-highlight">Key Concepts so far</a></li><li><a href="#node-with-mongo" class="table-of-contents__link toc-highlight">Node with Mongo</a><ul><li><a href="#exercise-part-1" class="table-of-contents__link toc-highlight">Exercise part 1</a></li><li><a href="#exercise-part-2-refactor-the-code" class="table-of-contents__link toc-highlight">Exercise part 2: refactor the code</a></li><li><a href="#exercise-part-3-deploy-our-app" class="table-of-contents__link toc-highlight">Exercise Part 3: Deploy our app</a></li></ul></li><li><a href="#mongo-on-heroku" class="table-of-contents__link toc-highlight">Mongo on Heroku</a></li><li><a href="#environment-variables" class="table-of-contents__link toc-highlight">Environment variables</a></li><li><a href="#coursework" class="table-of-contents__link toc-highlight">Coursework</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/codeyourfuture/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/codeyourfuture.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/codeyourfuture_" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/CodeYourFuture" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 CodeYourFuture</div></div></div></footer></div>
<script src="/assets/js/runtime~main.437d8933.js"></script>
<script src="/assets/js/main.13702b61.js"></script>
</body>
</html>